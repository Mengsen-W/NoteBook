<!--
 * @Date: 2021-03-11 15:22:20
 * @Author: mengsen
 * @LastEditors: mengsen
 * @LastEditTime: 2021-03-11 15:38:12
 * @FilePath: \NoteBook\计算机体系\计算机组成原理.md
-->

# 计算机组成原理

## 计算机基本组成

### 储存器

* 存储体

  + 存储单元：存放一串二进制代码
  + 存储子：存储单元中的二进制代码的组合
  + 存储子长：存储单元中的二进制代码的位数
  + 按地址寻址

* MAR：存储器地址寄存器，MAR的位数和存储单元的个数有关
* MDR：保存cpu和存储体之间欲交换的数据，与存储单元长度相同

### 运算器

* ACC

  + 加法：被加数  和
  + 减法：被减数 和
  + 乘法：初态被乘数 乘积高位
  + 除法：被除数 余数

* MQ

  + 乘法：乘数 乘积低位
  + 除法：商

* X

  + 加法：加数
  + 减法：减数
  + 乘法：运算态被乘数 被乘数
  + 除法：除数

* ALU

  + 算术逻辑运算器

### 控制器

* PC：程序计数器

  + 保存当前欲执行指令的地址
  + PC具有计数功能
  + (PC） + 1 -> PC

* IR：指令寄存器

  + 存放当前执行的指令
  + 由PC指向的地址存放在IR内

* CU：控制单元

  + 用于分析执行IR中的指令

### 输入设备

## 总线

### 总线的基本概念

* 定义：连接各个部件的信息传输线，是各个部件构想的传输介质
* 信息传输

  + 串行

    - 抗干扰能力强
    - 传输速度较小

  + 并行

    - 抗干扰能力弱，无法用于长距离传输
    - 传输速度较大

### 总线的分类

* 片内总线：芯片内部的总线
* 系统总线：计算机各部件的信息传输线

  + 数据总线：双向；与机器字长，存储字长有关
  + 地址总线：单向；与存储地址，IO地址有关
  + 控制总线：有出有入

* 通信总线：计算机之间传输

### 总线特性及性能指标

* 总线特性

  + 机械特性：尺寸、形状、管脚数、排序顺序
  + 电气特性：传输方向、有效的电平范围
  + 功能特性：每根线传输的功能
  + 时间特性：信号的时间关系

* 总线的性能指标

  + 总线宽度：数据线的根数
  + 标准传输速率：每秒传输的最大字节数
  + 时钟同步/异步：同步、不同步/异步
  + 总线复用：地址线和数据先复用
  + 信号线数：地址线、数据线、控制线的总和
  + 总线控制方式：突发、自动、仲裁、逻辑、计数
  + 其他指标：负载能力

### 总线结构

* 单总线结构：总线成为系统传输数据的瓶颈
* 多总线结构：内存成为瓶颈

### 总线控制·

* 总线判优控制

  + 基本概念

    - 主设备（模块）：对总线有控制权
    - 从设备（模块）：响应从主设备发来的总线命令

  + 判优逻辑

    - 集中式

			- 链式查询

				- 总线结构

					- 数据线
					- 地址线
					- BS线：总线忙
					- BR线：总线请求
					- BG线：总线同意

				- 工作逻辑

					- 若从设备通过BR线向总线控制请求总线
					- BG线链式的向各部件查询，直到发现提出总线请求的从设备
					- 因为所有设备通过一条线来向主设备提出总线占用请求
					- 获得总线使用权的从设备通过BS线，向主设备发送总线忙请求
					- 主设备通过地址线找到地址通过数据线传输数据

				- 特点

					- 排在后面的从设备可能会有饥饿现象
					- BG线对电路故障敏感
					- 结构简单，增删设备，调换顺序简单
					- 速度较慢

			- 计数器定时查询

				- 总线结构

					- BS总线忙
					- BR总线请求
					- 数据线
					- 地址线
					- 设备地址

				- 工作逻辑

					- 通过主设备计数器来计数，而不需要每一个词都从开头从设备查询
					- 通过设备地址线进行应答

				- 特点

					- 调度灵活，通过调整计数器计数方式
					- 谁被地址线的带宽可能会大于BG线

			- 独立请求方式

				- 总线结构

					- BR总线请求每一个从设备
					- BG总线同意每一个从设备

				- 工作逻辑

					- 优先级在总线主设备内部设置优先级
					- 每一个从设备都可以独立的提出请求和独立地由主设备同意请求

				- 特点

					- 不需要设置BS总线忙
					- 经过一些列算法选择同意从设备
					- 而其他两种是不可以选择的，BG线/设备地址线若没有BS线有一只查询
					- 设备线数目多

			- BS总线的目的--告知主模块使BG线或者设备地址线停下来

				- 总线忙的目的是由发送数据的从设备发出
				- 用来告知所有其他从设备总线占用以及是BG线停止
				- 若没有BS总线忙则可能使得BG继续向下查询
				- 导致多个从设备向主设备发数据
				- 在独立请求方式下，每个同意是独立的，若没同意则不可能发数据

    - 分布式

* 总线通信控制

  + 目的：解决通信双方协调配的问题
  + 总线传输周期

    - 申请分配阶段：主模块申请，总线仲裁决定
    - 寻址阶段：主设备向从设备发送地址和命令
    - 传数阶段：主设备和从设备交换信息
    - 结束阶段：主模块从模块撤销有关信息

  + 总线通信方式

    - 同步通信：统一师表控制数据传送

			- 通讯逻辑

				- 第一个时钟周期给出地址信号
				- 第二个时钟周期给出控制信号
				- 第三个时钟周期从设备给出数据信号
				- 欸四个时钟周期撤销信号

			- 特点--双规

				- 每个从模块的时钟周期必须一致
				- 速度不同从模块选择最慢的

    - 异步通信：采用应答方式，没有公共时钟标准

			- 通讯逻辑

				- 没有时钟增加请求和应答线
				- 不互锁

					- 主设备发请求从设备应答没有确认过程

				- 半互锁

					- 主设备发送请求信号，从设备应答
					- 主设备接收到应答信号后才会撤销请求

				- 全互锁

					- 主设备发送请求信号
					- 主设备接收到应答信号后才会撤销请求
					- 主设备的请求信号撤销以后
					- 从设备才撤销应答信号

    - 半同步通信：同步也不结合，解决不同速度的设备传输

			- 通讯逻辑

				- 在同步通信的T3前增加了WAIT段信号
				- 在T3到来前从模块发送WAIT低电平响应
				- 主模块检测到WAIT低电平会插入一个等待时间T
				- 直到在某一个T之前WAIT变为高电平
				- 主模块则继续同步通信方式

    - 分离式通信：充分挖掘系统每个总线瞬间的能力

			- 通讯逻辑

				- 利用从设备准备数据的时间
				- 主设备放弃总线的使用权
				- 其他主设备和其他从设备通讯
				- 准备完成后从设备边玩主设备发送主线占用请求

			- 特点

				- 各个模块地位相同
				- 各模块准备数据时不占用总线
				- 采用同步方式通信
				- 充分利用总线性能

## 存储器

### 存储器分类

* 按存取介质分类

  + 半导体存储器
  + 磁表面存储器
  + 磁芯存储器
  + 光盘存储器

* 按存取方式分类

  + 存取时间与物理地址无关（随即访问）

    - 随机存储器：可读可写
    - 只读存储区：只读

  + 存取时间和物理地址有关（串行访问）

    - 顺序存取储存器：磁带
    - 直接存取存储器：磁盘

* 按存取作用分类

  + 高速缓冲存储器（Cache）

    - cpu和主存缓冲

  + 主存储器

    - RAM可读可写

			- 静态RAM
			- 动态ROM

    - ROM只读

			- MROM
			- FROM
			- EPROM
			- EEPROM

  + Flash Memory（SSD）
  + 辅助存储器

### 主存储器

* 概述

  + 主存的基本组成

    - MAR（保存地址）-> 译码器 -> 驱动器 -> 访问存储体
    - 控制电路（控制读写方向操作）-> 读写电路（控制MDR）-> MDR（保存数据）-> 存储体 

  + 主存与cpu之间的联系

    - 数据总线连CPU Cache 和 MDR 双向
    - 地址总线连CPU  和 MAR 单向
    - 控制信号连接控制电路

  + 主存中存储单元地址的分配

    - 大端：低位字节存放低地址，以高位字节地址作为存储字地址
    - 小端：低位字节存放高地址，以低位字节地址作为存储字地址

  + 主存的技术指标

    - 存储容量：总容量
    - 存储速度

			- 存取时间：存储器的访问时间
			- 存取周期：连续两次独立的存储器操作

    - 存储器带宽：单位时间内读取的大小

* 半导体存储器

  + 存储矩阵：由多个存储芯片组成
  + 地址线单向由CPU链接译码驱动

    - 线选法（一维）无法将容量很高
    - 重合法（二维）容量很高，寻址迅速

  + 数据线双向链接读写电路
  + 片选线：选择存储芯片的控制线
  + 读写控制线：控制读写操作

* 随机存取存储器（RAM）

  + 静态RAM（SRAM）

    - 采用触发器 集成度低 引脚多 耗电高 无刷新结构 Cache 速度快不需要刷新 造价高

  + 动态RAM（DRAM）

    - 采用电容 集成度高 引脚少 耗电低 刷新时间 内存条 因刷新问题读写慢 价格低

* 只读存储器（ROM）

  + 掩模ROM（MROM）

    - 只读不能擦除一次性MOS管

  + PROM（一次性编程）

    - 一次编程利用熔丝

  + ERPOM（多次编程）

    - N型沟道浮动栅MOS电路，紫外线擦除

  + EEPROM（多次编程）

    - 电擦除，可局部或全部擦擦写

  + Flash Memory（闪速型存储器）

    - 具备一定ROM功能

### 存储器与CPU的连接

* 存储器容量的扩展

  + 位扩展（增加存储子长）

    - 地址线并行，数据线串行
    - 两个芯片同时工作

  + 字扩展（增加存储子的容量）

    - 地址线串行，数据线串行
    - 两个芯片不能同时工作

  + 位和字同时扩展

    - 综合前两个

* 存储器与CPU的连接

  + 地址线的连接
  + 数据线的连接
  + 读/写命令线的连接
  + 片选线的连接
  + 合理选择存储芯片
  + 其他 时序负载

### 存储器的校验

* 汉明码检验能力与任意两组合法代码之间二进制位的最少差异数有关

### 提高访存速度的措施

* 采用高速器件
* 采用层次结构 Chche - 主存
* 调整主存结构

  + 单体多字系统增加存储器带宽
  + 多体并行

    - 高位交叉可能导致某一个存储体被频繁访问类似片选线--用于容量扩展
    - 低位交叉分散到不到存储体类似分离式通讯--用于带宽扩展

  + 高性能储存芯片

    - 同步RAM（DRAM）
    - RDROAM
    - 带Cache的DRAM

### 高速缓冲存储器

* 概述

  + 解决CPU空等问题
  + Cache地址和主存地址一致
  + CPU利用Cache中标记确定信息在Cache内部还是主存内部
  + 主存缓存按块存储，块的大小相同
  + 没命中时将主存块调入主存
  + 用标记记录与某缓存块建立了对应关系的主存块号
  + Cache的命中率与Cache的容量和块长有关
  + Cache的访问效率与命中率有关

* 读写操作

  + 写直达法：向内存和Cache一起写入
  + 写回法：写入Cache，当Cache替换时才写入内存

* Cache改进

  + 增加Cache的级数
  + 统一缓存和分立缓存

* Cache主存的地址映射

  + 直接相连映射

    - 每一个主存块（离散/连续）对应唯一的Cache
    - 区号写入标志地区，主存区域划分主存
    - 每个缓存块可以和若干主存块对应
    - 每个主存块只能和一个缓存块对应

  + 全相联映射

    - 主存中任何一个块可以被放入任何一个块内
    - 电路复杂Cache利用率高

  + 组相联映射

    - 主存分区，Cache分组
    - 组内全相联，组外直接相连

* 替换算法

  + 先进先出
  + 近期最少使用算法

## 输入输出系统

### IO组成

* IO软件

  + IO指令

    - CPU指令的一部分包括操作码命令码设备码

  + 通道指令

    - 通道自身的指令

* IO硬件

  + IO接口
  + 设备控制器

### IO设备和主机的联系方式

* IO设备编址

  + 统一编址

    - 将IO地址看作主存地址的一部分
    - 可以利用取数存数指令

  + 单独编址

    - 有专用的IO指令

* 设备选址

  + 用设备选择电路识别是否被选中

* 传送方式

  + 串行
  + 并行

* 联络方式

  + 立即相应
  + 异步工作采用应答方式

    - 并行
    - 串行
    - 同步方式

* IO与主机连接方式

  + 辐射式连接

    - 每台设备有配有一套控制线和信号线

  + 总线连接

    - 外部设备用过接口和总线连接
    - 便于增删设备

### IO设备与主机信息传送的控制方式

* 程序查询方式

  + 未准备好循环查询
  + CPU和IO串行

* 程序中断方式

  + 只有当IO准备结束后会中断CPU当前工作
  + CPU和IO并行

* DMA方式

  + CPU只控制IO设备启动
  + 内存IO通过DMA控制器直接交流
  + CPU在DMA和内存通讯时不能和内存通讯
  + 但是可以和Cache交流

### IO接口

* 概述

  + 实现设备选择
  + 实现数据缓冲达到速度的匹配
  + 实现数据传一并格式
  + 实现电平转换
  + 传送控制命令
  + 反应设备状态

* 接口的组成和功能

  + 总线连接方式的IO接口电路

    - 设备选择线单向
    - 数据线双向
    - 命令线单向
    - 状态线单向

  + 功能

    - 选址功能--设备选择电路
    - 传送命令功能--命令寄存器和译码器
    - 传送数据功能--数据缓冲寄存器
    - 反应设备状态--设备状态标记

			- 完成触发器--设备是否准备好
			- 工作触发器--准备过程中工作状态
			- 中断请求触发器--用于请求中断
			- 屏蔽触发器--用于屏蔽中断请求

    - 控制其他的电路--逻辑控制电路

* 接口类型

  + 按照数据传送方式费雷
  + 按功能选择的灵活性分类
  + 按通用性分类
  + 按数据传送的控制方式

### 程序查询方式

* 查询流程

  + 设置计数器，控制传输数量大小
  + 将设备排序，优先级高的设备先被查询到
  + 若其中有一个程序应答等待则CPU不会向下查询

### 程序中断方式

* 中断的概念

  + CPU在执行程序的过程中，发生特殊/异常事件
  + 通过执行中断服务程序
  + 保存中断现场
  + 中断当前程序的处理，去处理特殊/异常事件
  + 异常/特殊事件处理结束后，继续处理被中断程序

* IO中断的产生

  + 由中断源产生的必须CPU参与执行的程序

* 程序中断方式的接口电路

  + 配置中断请求触发器和中断屏蔽触发器

    - INTR--中断请求触发器
    - MASK--中断屏蔽触发器

  + 排队器

    - 硬件

			- 在CPU内或在接口电路中（链式排队器）

    - 软件

			- 查询排队表格

  + 中断向量地址形成部件

    - 入口地址

			- 软件查找
			- 硬件向量法

  + 程序中断方式接口电路基本组成

* IO中断处理过程

  + 条件

    - 允许中断触发器
    - CPU发送查询指令

  + 结果

    - 启动排队器
    - 调整中断信号控制器

* 中断服务程序流程

  + 保护现场

    - 程序断电保护
    - 寄存器内容保护

  + 中断服务

    - 对不同的IO设备具有不同内容的设备服务

  + 恢复现场

* 单重中断和多重中断

  + 中断过程中是否会被更高优先级的中断中断

### DMA中断方式

* DMA与主存交换数据的三种方式

  + 停止CPU访问主存
  + 周期挪用/周期窃取
  + DMA和CPU交替访问

* DMA接口的功能

  + 选择DMA设备（包括选择型/多路型）
  + 向CPU申请DMA传送
  + 处理总线控制权的转交
  + 管理系统总线、控制数据传送
  + 确定数据传送的首地址和长度
  + 修正传送过程中的数据地址和长度
  + DMA传送结束，给叔操作系统信号

* DMA的工作过程

  + 预处理--CPU+DMA
  + 数据传送--DMA
  + 后处理--CPU+DMA

* DMA和系统连接方式

  + 公共请求线的DMA请求

    - 类似总线线性

  + 计数器定时查询

    - 类似于总线定时器

  + 独立DMA请求

    - 类似总线独立请求

### DMA与程序中断比较

* 数据传送中DMA由硬件负责 中断方式由程序负责
* 响应时间中DMA在存取周期结束后中断方式在指令执行结束后
* 处理异常中中断方式能处理异常DMA方式不能处理异常
* 中断请求中中断方式传送数据DMA方式采用后处理
* 优先级中断方式低DMA方式高

## 计算机的运算方法

### 无符号数和有符号数

* 无符号数

  + 寄存器/内存的位数反应无符号数的表示范围

* 有符号数

  + 机器数与真值

    - 约定符号位和小数点的位置

  + 原码表示法

    - 整数

			- 0，x  2^n > x >= 0  // 0 表示符号位
			- 2^n - x  0 >= x > -2^n // n表示整数的位数，把第一位当作符号位

    - 小数

			- x  1 > x >= 0 //小数点在第一位后面
			- 1-x  0 >= x > -1 //第一位表示符号位

    - 特点

			- 简单直接
			- 不能将减一个数转换为加一个数

  + 补码表示法

    - 整数

			- 0，x                 2^n > x >= 0
			- 2^(n+1) + x     0 >x >= -2^n (mod 2^(n+1))

    - 小数

			- x        1>x>=0
			- 2+x    0>x>=-1(mod2)

    - 和原码关系

			- 真值正原补同
			- 真值负补码等于原码取反就加一

  + 反码表示法

    - 整数

			- 0，x                      2^n > x >= 0
			- (2^(n+1) - 1) + x   0 >= x > -2^n (mod 2(n+1) - 1)

    - 小数

			- x          1 > x >= 0
			- (2 - 2^ (-n)) + x       0 >= x > -1 (mod 2 -2^(-n))

  + 移码表示法

    - 整数 2^n + x (2^n > x >= -2^n)

    - 没有小数
    - 和补码联系

			- 数值部分完全同，符号位相反

### 数的定点表示和浮点表示

* 定点表示

  + 小数点按约定方式标出

    - 小数定点机：小数点在数符后面，数值部分前面，以补码形式唯一能表示的是-1
    - 整数定点机：小数点在数值部分后面，全部为整数

* 浮点表示

  + 浮点数的表示形式

    - N = S * r^n
    - S 尾数 小数定点
    - j 阶码 整数
    - r 尾数的基值

  + 浮点数的表示范围 尾数n位 阶码 m 位

    - 最小复数 -2^（2^m - 1） * （1 - 2（-n））
    - 最大复数 -2^（2^m - 1） *  2（-n）
    - 最小正数 2^（2^m - 1） *  2（-n）
    - 最大正数 2^（2^m - 1） * （1 - 2（-n））

  + 浮点数的规格化形式

    - 浮点数的规格化形式

			- r = 2 尾数的最高位不为0
			- r = 4 尾数的最高两位不为0
			- r = 8 尾数的最高三位不为0

    - 浮点数的规格化

			- r = 2

				- 左规，尾数左移1位，阶码减1
				- 右规，尾数右移1位，阶码加1

			- 基数r越大，表示的浮点数的范围大，精度低

### 定点运算

* 移位运算

  + 意义----数值移动

    - 左移绝对值扩大
    - 右移绝对值减小

  + 算术移位规则

    - 符号位不变
    - 正数填零，负数原码填零，复数反码填一，复数补码左移填零，右移填1

  + 逻辑移位

    - 无符号数的移位
    - 左移右移都是填零

* 加减法运算

  + 补码加减法

    - 加法

			- 整数 [A]补 + [B]补 = [A+B]补 （mod 2^(n+1)）
			- 小数 [A]补 + [B]补 = [A+B]补 （mod 2）

    - 减法

			- 整数 [A-B]补 = [A]补 + [-B]补 (mod  2^(n+1))
			- 小数 [A-B]补 = [A]补 + [-B]补 (mod  2)

  + 溢出判断

    - 一位符号数的判断方法

			- 参加操作的两个数符号相同，结果符合与原操作数符号不同，则为溢出

    - 二位符号数的判断方法

			- 若两个符号位不同则溢出
			- 最高符号位代表真正的符号

* 乘法运算

  + 用加法和被乘数的移位实现
  + 将被乘数移位空出的高位存放部分积的低位
  + 一位符号位

    - 数值部分绝对值相乘
    - 乘积符号位单独计算

* 除法运算

  + 源码除法

    - 必要假设

			- 小数/整数除法的商必须是小数/整数
			- 被除数等于零不经过逻辑运算直接判商零
			- 出书蹦年为零

    - 符号位单独异或运算
    - 恢复余数法

			- 用一个加法试探商零或商一
			- 若得到负数则恢复余数
			- 得到商1后得到的余数左移一位

    - 不恢复余数法（加减交替）

			- 上商1，余数左移一位减去除数
			- 上商0，余数左移一位加上除数

    - 区别

			- 恢复余数法先做减法，小于零则回复余数，左移一位
			- 加减交替法，不需要恢复余数，直接移位加/减法就行

### 浮点四则运算

* 步骤：对阶，尾数求和，规格化，舍入，溢出判断，举例
* 调整成为定点运算，对阶码和尾码分别计算

### 算术逻辑单元

* ALU电路

  + Ai 和 Bi 表示两个输入 F 表示结果 Ki 表示控制

* 快速进位链

  + 并行加法器
  + 串行进位器
  + 并行进位链

    - 单重分组条约进位链

			- n 位全加器分为若干组，小组中的进位同时产生，小组之间串行进位

    - 双重分组跳跃进位链

			- n 位全加器分为若干大组，大族中又包含若干小组。每个大组小组中的进位同时产生，大组之间串行进位

## 指令系统

### 机器指令

* 指令格式

  + 操作码：反应机器做什么操作，对什么类型进行此操作

    - 长度固定：译码电路简单
    - 长度可变：扩展操作码技术

			- 操作码的位数随地址数的减少而增加
			- 类似IP地址的划分

  + 地址码

    - 地址个数

			- 四地址：四次访存

				- A1 第一个操作数地址
				- A2 第二个操作数地址
				- A3 结果地址
				- A4 下一条指令地址

			- 三地址：四次访存

				- 没有A4 利用OP代替A4

			- 二地址：四次访存

				- 将结果放在一个操作数地址中

			- 单地址：2此访存

				- 将一个操作数保存再ACC中，结果再ACC

			- 零地址：不访存

				- 对ACC的单操作数操作，如自增等

    - 指令字长

			- 固定：指令字长=存储字长
			- 可变：按字节的倍数变化

### 操作数类型和操作类型

* 操作数类型

  + 地址--无符号整数
  + 数组--定点数、浮点数、十进制数
  + 字符--ASCII
  + 逻辑数--逻辑运算

* 数据在存储器中的存放方式

  + 从任意位置开始

    - 内存利用率高
    - 读写控制困难，花费两个存取周期

  + 从存储字的起始点开始

    - 读写控制简单，在一个周期内完成
    - 浪费存储资源

  + 边界对准：从地址的整数倍位置开始访问

    - 类似结构体对齐，前两种的折中

* 操作类型

  + 数据传送
  + 算数逻辑运算操作
  + 移位操作
  + 转移指令
  + 输入输出

### 寻址方式：如何找到指令或数据的地址

* 指令寻址

  + 顺序
  + 跳跃

* 数据寻址

  + 立即寻址：形式地址就是操作数，寻址特征时#，指令执行阶段不访存
  + 直接寻址：有效地址由形式地址直接给出，访问内存得到操作数，需要访存一次
  + 隐含寻址：一个操作数隐含在ACC中，由形式地址的操作数内存中访问另一个操作数
  + 相对寻址：由形式地址加PC值得到一个实际地址
  + 间接寻址：有效地址由形式地址间接提供
  + 寄存器直接寻址：有效地为寄存器编号
  + 寄存器间接寻址：有效地址在寄存器中
  + 基址寻址

    - 采用专用寄存器作为基址寄存器
    - 采用通用寄存器作为基址寄存器

  + 变址寻址
  + 堆栈寻址

### 指令格式举例

* 兼容性

### RISC/CISC技术

* RISC精简指令集，用简单指令集戴特复杂指令，控制简单操作次数多
* CISC复杂指令集，能用到的指令尽量放入指令集中，控制复杂操作次数少

## CPU的结构和功能

### CPU功能

* 控制器功能

  + 指令控制
  + 操作控制
  + 时间控制
  + 处理中断

* 运算器功能

  + 数据加工

### 指令周期

* 概念

  + 取出并执行一条指令所需的全部时间

* 四种状态

  + 取指令，取地址，存取操作数，存断点

### 指令流水

### 中断系统

* 引起中断的原因

  + 人为设置的中断
  + 程序性事故
  + 硬件故障
  + I/O设备
  + 外部事件

* 中断服务程序的入口地址寻找

  + 硬件--向量地址形成部件
  + 软件查询法

* 中断响应

  + 条件 允许中断触发器值置1

  + 时间  一般在指令阶段完成后
  + 中断隐指令

    - 保护程序断点

			- 保存于特定地址内
			- 断电进栈
    - 寻找中断服务程序的入口

    - 硬件关中断

* 保护现场和恢复现场

  + 保护现场

    - 断点--中断隐指令
    - 寄存器内容--中断服务程序

  + 恢复现场--中断服务程序

* 多重中断

  + 条件

    - 提前设置开中断指令
    - 按照优先级排列

  + 屏蔽技术

    - 可以按照中断屏蔽字来改变处理优先级

  + 断点保护

    - 断点进栈 -- 中断隐指令
    - 断点存入地址 -- 中断隐指令

## 控制单元

### 功能

* 微操作命令分析
* 控制单元的功能

### 设计方法

* 组合逻辑设计

  + 操作时间表
  + 画出逻辑图
  + 速度快，思路清晰，调试困难

* 微程序设计

*XMind: ZEN - Trial Version*
